<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Clientes</title>
  <!--link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"-->
  <link rel="stylesheet" href="./static/css/bootstrap.min.css">
  <style type="text/css">
            .tripAsigment-column {
                vertical-align: top;
                height: 200px;
            }
            .item-title {
                float: left;
            }
            .kanban-column{
              padding-left: 5px;
              padding-right: 5px;
            }
            .column-items{
              padding-bottom: 25px;
            }
        </style> 
</head>
<body>

  <div class="row">
    <div class="col-md-12" id="tripAsigment-board-here">
        
    </div>
  </div>

  <!-- template TripBoard -->
  <script type="text/template" id="tripAsigment-template">
    <div class="panel panel-default">
      <div class="panel-heading">

        <div class="pull-left" >
            <h3 class="panel-title">Asignador de Rutas</h3>
            <p>Puedes arrastrar y soltar cada cliente hacia el chofer que relalizará la ruta.<br>
               Con el botón <spam class="glyphicon glyphicon-plus"/> de la parte superior derecha puedes agregar más choferes. 
            </p>
        </div>
        <div class="pull-right">
            <button type="button" class="btn btn-sm btn-default" data-dismiss="panel" aria-hidden="true" id="button-add-tripAsigment-column" title="Add Trip Asigment Column">
                <span class="glyphicon glyphicon-plus"></span>
            </button>

        </div>                        
        <div class="clearfix"></div>
      </div>
      <div class="panel-body">
          <table id="tripAsigmentBoardContainerTable" style="width: 100%" >
            <tbody>
              <tr id="tripAsigment-row">
                <td id="passenger" class="kanban-column">
                  <div class="panel panel-default">
                    <div class="panel-heading">
                      <div class="pull-left" id="column-passenger-title">
                          Solicitudes
                      </div>
                      <div class="pull-right">
                        <div class="btn-group btn-group-xs">
                          
                          <button type="button" class="btn btn-sm btn-default" data-dismiss="panel" aria-hidden="true" id="button-add-tripAsigment-item" title="Add Trip Asigment Item">
                            <span class="glyphicon glyphicon-plus"></span>
                          </button>
                          <button type="button" class="btn btn-sm btn-default" id="button-column-edit" title="Edit Column">
                            <span class="glyphicon glyphicon-pencil"></span>
                          </button>                        
                          <button type="button" class="btn btn-sm btn-default" id="button-column-trash" title="Trash Column">
                            <span class="glyphicon glyphicon-trash"></span>
                          </button>            
                        </div>
                      </div>
                      <div class="clearfix"></div>

                    </div>
                    <div  class="panel-body">
                      <div class="column-items" id="column-items"  ondrop="drop(event)" ondragover="allowDrop(event)">
                        <% _.each(solicitudes, function(solicitud){ %>
                          <div id="drag-clientRequest-<%= solicitud.get('cliente').id_cliente %>" id_solicitud="<%= solicitud.get('id_solicitud') %>" id_cliente="<%= solicitud.get('cliente').id_cliente %>" class="panel panel-primary" draggable="true" ondragstart="drag(event)" >
                            <div class="panel-heading">
                              <div class="pull-left" id="solicitud-<%= solicitud.get('id_solicitud') %>-title">
                                <%= solicitud.get('cliente').nombre %>
                              </div>
                              <div class="pull-right">
                                <div class="btn-group btn-group-xs">
                                  <button type="button" class="btn btn-primary btn-xs btn-default" id="button-edit-tripAsigment-item" title="Edit Column">
                                    <span class="glyphicon glyphicon-pencil"></span>
                                  </button>                        
                                  <button type="button" class="btn btn-primary btn-xs btn-default" id="button-delete-kanban-item" title="Trash Column">
                                    <span class="glyphicon glyphicon-trash"></span>
                                  </button>                                                
                                </div>
                              </div>
                              <div class="clearfix"></div>
                            </div>                    
                            <div class="panel-body">
                              Origen: <%= solicitud.get('cliente').direccion %>
                              <br/>
                              Destino: AEREOPUERTO 
                            </div>
                          </div>
                        <% 
                        }); 
                        %>
                      </div>
                    </div>
                  </div>    
                </td>
                <% 
                  _.each(asignaciones, function(assigment){ 
                %>
                  <td id="assigment-<%= assigment.get('id_solicitud') %>" class="kanban-column">
                    <div class="panel panel-default">
                      <div class="panel-heading">


                        <div class="pull-left" id="column-driver-<%= assigment.get('id_solicitud') %>-title">
                            <%= assigment.get('chofer').nombre %> - <%= assigment.get('chofer').vehiculo %>
                        </div>
                        <div class="pull-right">
                          <div class="btn-group btn-group-xs">
                            
                            <button type="button" class="btn btn-sm btn-default" data-dismiss="panel" aria-hidden="true" id="button-add-tripAsigment-item" title="Add Trip Asigment Item">
                              <span class="glyphicon glyphicon-plus"></span>
                            </button>
                            <button type="button" class="btn btn-sm btn-default" id="button-column-edit" title="Edit Column">
                              <span class="glyphicon glyphicon-pencil"></span>
                            </button>                        
                            <button type="button" class="btn btn-sm btn-default" id="button-column-trash" title="Trash Column">
                              <span class="glyphicon glyphicon-trash"></span>
                            </button>            
                          </div>
                        </div>
                        <div class="clearfix"></div>
                      </div>
                      <div id="div-assigment-<%= assigment.get('id_solicitud') %>" class="panel-body">
                        <div class="column-items" name="asignaciones" id_assigment="<%= assigment.get('id_asignacion') %>" id="column-items-<%= assigment.get('id_solicitud') %>" ondrop="drop(event)" ondragover="allowDrop(event)">
                        <% _.each(assigment.get('solicitud'), function(solicitud){ %>
                          <div id="drag-clientPreAsigment-<%= solicitud.cliente.id_cliente %>" class="panel panel-primary" draggable="true" ondragstart="drag(event)"  >
                            <div class="panel-heading">
                              <div class="pull-left" id="column-<%= assigment.get('id_solicitud') %>-title">
                                <%= solicitud.cliente.nombre %> 
                              </div>
                              <div class="pull-right">
                                <div class="btn-group btn-group-xs">
                                  <button type="button" class="btn btn-primary btn-xs btn-default" id="button-edit-tripAsigment-item" title="Edit Column">
                                    <span class="glyphicon glyphicon-pencil"></span>
                                  </button>                        
                                  <button type="button" class="btn btn-primary btn-xs btn-default" id="button-delete-kanban-item" title="Trash Column">
                                    <span class="glyphicon glyphicon-trash"></span>
                                  </button>                                                
                                </div>
                              </div>
                              <div class="clearfix"></div>
                            </div>                    
                            <div class="panel-body">
                              Origen: <%= solicitud.cliente.direccion %>
                              <br/>
                              Destino: AEREOPUERTO 
                            </div>
                          </div>
                        <% }); %>
                        </div>
                      </div>
                    </div>    
                  </td>
                <% }); %>
              </tr>
            </tbody>
          </table>
      </div>
    </div> 
  </script>

  <br/>

  <!-- modales -->
  <script type="text/template" id="modal-form-template">
    <div class="modal fade" id="form-modal-item-edit">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title"><%= formTitle %></h4>
          </div>
          <div class="modal-body">

          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Closerjeje</button>
            <button type="button" class="btn btn-primary">Save changes</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
  </script>

  

  <!-- Libraries -->
  <script src="./static/js/jquery-3.2.1.min.js" type="text/javascript"></script>
  <script src="./static/js/underscore-min.js" type="text/javascript"></script>
  <script src="./static/js/backbone-min.js" type="text/javascript"></script>
  <script src="./main.js" type="text/javascript"></script>

</body>

</html>
